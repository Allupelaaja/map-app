(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{26:function(e,t,r){},27:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r(12),a=r.n(s),i=r(2),o=r(0);var c=function(){var e={footer:{position:"relative",textAlign:"center",width:"100%",bottom:"0",left:"0",backgroundColor:"#9dc7d5",zIndex:"1000",height:"5%"},footerText:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"0",margin:"0"}};return Object(o.jsx)("div",{style:e.footer,children:Object(o.jsx)("p",{style:e.footerText,children:"Aleksi Heikkil\xe4 2021"})})},l=r(6),p=r(10),u=r.n(p),d=r(15);var j=function(e){var t={popupBackground:{position:"fixed",width:"100%",height:"100%",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",backgroundColor:"rgba(0,0,0, 0.5)",zIndex:"10000"},popupBox:{position:"absolute",inset:"35%",margin:"auto",backgroundColor:"white",borderRadius:"15px"},popupText:{marginBlockStart:"0.67em",marginBlockEnd:"0.67em",marginInlineStart:"0px",marginInlineEnd:"0px"},popupBoxContent:{display:"flex",alignItems:"center",flexDirection:"column"}},r=Object(n.useState)(""),s=Object(i.a)(r,2),a=s[0],c=s[1],p=Object(n.useState)(""),j=Object(i.a)(p,2),b=j[0],m=j[1],h=Object(n.useState)(""),x=Object(i.a)(h,2),O=x[0],f=x[1],g=e.setIsPopupVisible,k=e.markers,v=e.setMarkers,y=e.currMarker,C=e.setCurrMarker;function M(e,t){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://nominatim.openstreetmap.org/reverse.php?lat="+t+"&lon="+r+"&zoom=18&format=jsonv2").then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t.lat,t.lng);case 2:r=e.sent,n="",r&&(r.address.road&&r.address.house_number?n=r.address.road+" "+r.address.house_number:r.address.road&&(n=r.address.road)),t.address=n,v([].concat(Object(l.a)(k),[t])),C(null),console.log(t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.jsx)("div",{style:t.popupBackground,onClick:function(){return g(!1)},children:Object(o.jsx)("div",{style:t.popupBox,onClick:function(e){return e.stopPropagation()},children:Object(o.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=y;t.name=a,t.startTime=b,t.stopTime=O,t.isOpen=function(e,t){var r=new Date;r.setFullYear(1996),r.setMonth(2),r.setDate(13);var n=new Date(r.toString().split(":")[0].slice(0,-2)+e),s=new Date(r.toString().split(":")[0].slice(0,-2)+t);return r>=n&&r<s||s<n&&r<s}(b,O),function(e){w.apply(this,arguments)}(t),g(!1)},children:Object(o.jsxs)("div",{style:t.popupBoxContent,children:[Object(o.jsx)("h1",{children:"Marker information"}),Object(o.jsxs)("label",{style:t.popupText,children:["Name:",Object(o.jsx)("input",{required:!0,type:"text",name:"name",value:a,onChange:function(e){c(e.target.value)}})]}),Object(o.jsxs)("label",{style:t.popupText,children:["Open from:",Object(o.jsx)("input",{required:!0,type:"time",name:"name",value:b,onChange:function(e){m(e.target.value)}})]}),Object(o.jsxs)("label",{style:t.popupText,children:["Open to:",Object(o.jsx)("input",{required:!0,type:"time",name:"name",value:O,onChange:function(e){f(e.target.value)}})]}),Object(o.jsx)("input",{type:"submit",value:"Submit",style:t.popupText})]})})})})},b=r(31),m=r(32),h=r(16),x=r(4),O=r(28),f=r(29),g=r(30);var k=function(e){var t=e.markers,r=e.setMarkers;return Object(O.a)({click:function(t){e.setCurrMarker(t.latlng),e.setIsPopupVisible(!0)}}),Object(o.jsx)(o.Fragment,{children:t.map((function(e){return Object(o.jsx)(f.a,{position:e,icon:new x.Icon({iconUrl:h.a,iconSize:[25,41],iconAnchor:[12,41]}),children:Object(o.jsx)(g.a,{children:Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{children:["Marker is at ",e.lat,", ",e.lng]}),Object(o.jsxs)("p",{children:["Marker name: ",e.name]}),""!==e.address?Object(o.jsxs)("p",{children:["Address: ",e.address]}):Object(o.jsx)(o.Fragment,{}),Object(o.jsxs)("p",{children:["Open hours: ",e.startTime," - ",e.stopTime]}),e.isOpen?Object(o.jsx)("p",{children:"Currently open"}):Object(o.jsx)("p",{children:"Currently closed"}),Object(o.jsx)("button",{onClick:function(){return function(e){var n=t.indexOf(e);if(n>-1){var s=Object(l.a)(t);s.splice(n,1),r(s)}console.log("marker removed")}(e)},children:"Remove marker"})]})})},e.lat+" "+e.lng)}))})};r(25);var v=function(e){var t=Object(n.useState)("75%"),r=Object(i.a)(t,2),s=r[0],a=(r[1],{map:{height:"100%",width:"100%",position:"absolute"},main:{float:"left",width:s,position:"relative"}});return Object(o.jsx)("div",{style:a.main,children:Object(o.jsx)("div",{className:"map__container",children:Object(o.jsxs)(b.a,{center:[60.17054205960518,24.9414674394951],zoom:13,style:a.map,whenCreated:e.setMap,children:[Object(o.jsx)(k,{markers:e.markers,setMarkers:e.setMarkers,setCurrMarker:e.setCurrMarker,setIsPopupVisible:e.setIsPopupVisible}),Object(o.jsx)(m.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})]})})})};var y=function(e){var t=Object(n.useState)("block"),r=Object(i.a)(t,2),s=r[0],a=(r[1],{sidebar:{display:s,height:"100%",top:"0",left:"0",textAlign:"center",float:"left",width:"25%",backgroundColor:"lightblue"},marker:{backgroundColor:"#c1e7f3",borderRadius:"15px",margin:"5px",padding:"25px"},markers:{marginLeft:"auto",marginRight:"auto",borderRadius:"15px",backgroundColor:"rgb(159 206 221)",overflowY:"auto",height:"80%",width:"95%"},headerDiv:{},buttonDiv:{display:"flex",padding:"25px",justifyContent:"center"}}),c=e.map,p=e.markers,u=e.setMarkers;return Object(o.jsxs)("div",{style:a.sidebar,children:[Object(o.jsxs)("div",{style:a.headerDiv,children:[Object(o.jsx)("h1",{children:"Maps-app"}),Object(o.jsxs)("div",{style:a.buttonDiv,children:[Object(o.jsx)("p",{style:{marginRight:"25px"},children:"List of markers"}),Object(o.jsx)("button",{style:{marginLeft:"25px"},onClick:function(){return u([]),void sessionStorage.clear()},children:"Clear all markers"})]})]}),Object(o.jsx)("div",{style:a.markers,children:0!==p.length?p.map((function(e){return Object(o.jsxs)("div",{style:a.marker,onClick:function(){return function(e){c.setView(e,c.getZoom())}(e)},children:[Object(o.jsxs)("p",{children:[p.indexOf(e)+1,". Marker: ",e.lat+" "+e.lng]}),Object(o.jsxs)("p",{children:["Marker name: ",e.name]}),""!==e.address?Object(o.jsxs)("p",{children:["Address: ",e.address]}):Object(o.jsx)(o.Fragment,{}),Object(o.jsxs)("p",{children:["Open hours: ",e.startTime," - ",e.stopTime]}),e.isOpen?Object(o.jsx)("p",{children:"Currently open"}):Object(o.jsx)("p",{children:"Currently closed"}),Object(o.jsx)("button",{onClick:function(){return function(e){var t=p.indexOf(e);if(t>-1){var r=Object(l.a)(p);r.splice(t,1),u(r)}console.log("marker removed")}(e)},children:"Remove marker"})]},e.lat+" "+e.lng)})):Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Nothing here yet..."}),Object(o.jsx)("p",{children:"Click on the map to add new markers"})]})})]})};var C=function(e){var t=e.markers,r=e.setMarkers,n=e.setMap,s=e.map;return Object(o.jsxs)("div",{style:{display:"flex",height:"95%"},children:[Object(o.jsx)(y,{markers:t,setMarkers:r,map:s}),Object(o.jsx)(v,{markers:t,setMarkers:r,setCurrMarker:e.setCurrMarker,setMap:n,setIsPopupVisible:e.setIsPopupVisible})]})};var M=function(){var e=JSON.parse(sessionStorage.getItem("markers"));e||(e=[]);var t=Object(n.useState)(e),r=Object(i.a)(t,2),s=r[0],a=r[1],l=Object(n.useState)(null),p=Object(i.a)(l,2),u=p[0],d=p[1],b=Object(n.useState)(null),m=Object(i.a)(b,2),h=m[0],x=m[1],O=Object(n.useState)(!1),f=Object(i.a)(O,2),g=f[0],k=f[1];return Object(n.useEffect)((function(){console.log(s),sessionStorage.setItem("markers",JSON.stringify(s))}),[s]),Object(o.jsxs)("div",{style:{height:"100%"},children:[Object(o.jsx)(C,{markers:s,setMarkers:a,map:u,setMap:d,setIsPopupVisible:k,setCurrMarker:x}),Object(o.jsx)(c,{}),g?Object(o.jsx)(j,{markers:s,setMarkers:a,currMarker:h,setCurrMarker:x,setIsPopupVisible:k}):Object(o.jsx)(o.Fragment,{})]})};r(26);a.a.render(Object(o.jsx)(M,{}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.18632af6.chunk.js.map